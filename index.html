<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
            // get
            $(document).ready(function(){
                $.ajax({
                    url : 'http://localhost:8080/Ubots/Projeto/filmes.json',
                    type : 'GET',
                    success : function(result) {
                        $.each(result, function() {
                            $.each(this, function(i, filme) {
                                $('<tr>').append(
                                    $('<td>').text(filme.nome_filme),
                                ).appendTo('#records_table');
                            });
                        });
                    }                    
                });
            });
            
            // post
            $(document).ready(function(){
                $("#mainbutton").click(function(){
                    var nomeFilme=$('#nomeFilme').val();
                    var notaFilme=$('#notaFilme').val();
                    var filmeVisualizado=$('#filmeVisualizado').val();

                    $.ajax({
                        url: 'http://localhost:8080/Ubots/Projeto/filmes/add.json',
                        type: 'POST',
                        data: { 
                            nome_filme : nomeFilme,
                            nota_filme : notaFilme,
                            visualizado : filmeVisualizado
                        },
                        success: function(result){
                            console.log(result);
                        }
                    });
                });
            });

            $(document).ready(function(){
                $("#editbutton").click(function(){
                    var idFilme=$('#idFilme').val();
                    var editaNome=$('#editaNome').val();
                    var editaNota=$('#editaNota').val();
                    var editaVisualizacao=$('#editaVisualizacao').val();

                    $.ajax({
                        url : 'http://localhost:8080/Ubots/Projeto/filmes/edit/' + idFilme + '.json',
                        type : 'PUT',
                        data: { 
                            nome_filme : editaNome,
                            nota_filme : editaNota,
                            visualizado : editaVisualizacao
                        },
                        'success' : function(result) {
                        console.log(result);
                        }
                    });
                });
            });
        </script>
    </head>
    <body>
        <table id="records_table" border='1'>
            <tr>
                <th>Nome</th>
            </tr>
        </table>

        <div id="div1">
            <h2>Enviar</h2>
            Nome Filme: <input type="text" id="nomeFilme"><br>
            Nota do Filme: <input type="text" id="notaFilme"><br>
            Filme Visualizado: <input type="text" id="filmeVisualizado"><br>
            <input id="mainbutton" class="mainbutton" type="button" value="Adicionar"/>
        </div> 
        

        <div id="div2">
            <h2>Enviar</h2>
            ID: <input type="text" id="idFilme"><br>
            Novo Nome: <input type="text" id="editaNome"><br>
            Nova  Nota: <input type="text" id="editaNota"><br>
            Filme Visualizado: <input type="text" id="editaVisualizacao"><br>
        </div> 
        <input id="editbutton" class="editbutton" type="button" value="Adicionar"/>
    </body>
</html>
